var h=Object.defineProperty;var p=(o,r,t)=>r in o?h(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t;var n=(o,r,t)=>p(o,typeof r!="symbol"?r+"":r,t);import*as e from"three";import{OrbitControls as m}from"https://unpkg.com/three@0.172.0/examples/jsm/controls/OrbitControls.js";import{GLTFLoader as E}from"https://unpkg.com/three@0.172.0/examples/jsm/loaders/GLTFLoader.js";var s=class{constructor(){n(this,"scene");n(this,"camera");n(this,"renderer");n(this,"controls");n(this,"room",null);n(this,"pointLight");this.scene=new e.Scene,this.camera=new e.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new e.WebGLRenderer({antialias:!0,powerPreference:"high-performance"}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=e.PCFSoftShadowMap,this.renderer.outputColorSpace=e.SRGBColorSpace,this.renderer.toneMapping=e.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1,this.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(this.renderer.domElement),this.camera.position.set(7.07,12,7.07),this.camera.lookAt(0,0,0),this.controls=new m(this.camera,this.renderer.domElement),this.controls.enableDamping=!0;let r=new e.AxesHelper(1);this.scene.add(r),this.setupLights(),this.loadRoom(),this.setupEventListeners(),this.animate()}setupLights(){let r=new e.AmbientLight(16777215,.2);this.scene.add(r);let t=new e.PointLight(16777215,1.5,100);t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.bias=-.001,this.scene.add(t),this.pointLight=t}loadRoom(){new E().load("room.glb",t=>{this.room=t.scene,this.scene.add(this.room),this.room.traverse(i=>{if(i.name==="Lampshade"||i.name.includes("Lampshade")){let a=new e.Vector3;i.getWorldPosition(a),this.pointLight.position.copy(a),console.log(this.pointLight.position)}i instanceof e.Mesh&&(i.castShadow=!0,i.receiveShadow=!0,i.material&&i.material instanceof e.MeshStandardMaterial&&(i.material.envMapIntensity=1.5,i.material.metalness=i.material.metalness||0,i.material.roughness=Math.max(.3,i.material.roughness||1),i.material.needsUpdate=!0))});let d=new e.Box3().setFromObject(this.room).getCenter(new e.Vector3);this.room.position.sub(d)},t=>{console.log("Loading progress:",t.loaded/t.total*100+"%")},t=>{console.error("Error loading room:",t)})}setupEventListeners(){window.addEventListener("resize",()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)})}animate(){requestAnimationFrame(()=>this.animate()),this.controls.update(),this.renderer.render(this.scene,this.camera)}};new s;
