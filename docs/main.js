var c=Object.defineProperty;var p=(s,e,t)=>e in s?c(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>p(s,typeof e!="symbol"?e+"":e,t);import*as r from"three";import{OrbitControls as m}from"three/addons/controls/OrbitControls.js";import{GLTFLoader as u}from"three/addons/loaders/GLTFLoader.js";import{DRACOLoader as g}from"three/addons/loaders/DRACOLoader.js";var h=class{constructor(){n(this,"container");n(this,"progressBar");n(this,"currentProgress",0);n(this,"targetProgress",0);n(this,"MINIMUM_LOAD_TIME",2e3);n(this,"loadStartTime");n(this,"isAnimating",!0);n(this,"onComplete");n(this,"animate",()=>{this.isAnimating&&(this.targetProgress<90&&this.currentProgress<90&&(this.targetProgress+=.1),this.currentProgress+=(this.targetProgress-this.currentProgress)*.1,this.progressBar.style.width=`${this.currentProgress}%`,requestAnimationFrame(this.animate))});this.container=document.querySelector(".loading-bar"),this.progressBar=document.querySelector(".loading-progress"),this.loadStartTime=performance.now(),this.animate()}updateProgress(e){this.targetProgress=e}hide(e){this.onComplete=e;let t=performance.now()-this.loadStartTime,i=Math.max(0,this.MINIMUM_LOAD_TIME-t);this.targetProgress=100,setTimeout(()=>{this.isAnimating=!1,this.container.style.display="none",this.onComplete?.()},i)}showError(){this.container.style.backgroundColor="rgba(255, 0, 0, 0.3)",this.isAnimating=!1}},d=class{constructor(e,t){n(this,"element");n(this,"position");n(this,"velocity");n(this,"colorTransition",0);n(this,"currentColorIndex",0);n(this,"isPaused",!1);n(this,"COLORS",["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7","#dda0dd","#98d8c8","#fd79a8"]);n(this,"COLOR_TRANSITION_SPEED",.01);n(this,"VELOCITY",{x:2,y:1.5});n(this,"INITIAL_POSITION",{x:100,y:100});this.position={...this.INITIAL_POSITION},this.velocity={...this.VELOCITY},this.element=this.createElement(e,t)}createElement(e,t){let i=document.createElement("a");return i.href=t,i.textContent=e,i.style.cssText=`
      position: fixed;
      color: white;
      font-family: 'Arial', sans-serif;
      font-size: 24px;
      font-weight: bold;
      text-decoration: none;
      z-index: 1000;
      user-select: none;
      pointer-events: auto;
      display: none;
    `,i.addEventListener("mouseenter",()=>{this.isPaused=!0}),i.addEventListener("mouseleave",()=>{this.isPaused=!1}),document.body.appendChild(i),i}show(){this.element.style.display="block"}hide(){this.element.style.display="none"}update(){this.updatePosition(),this.updateColor(),this.applyStyles()}updatePosition(){if(this.isPaused)return;let e=this.element.getBoundingClientRect(),{width:t,height:i}=e;this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,(this.position.x<=0||this.position.x>=window.innerWidth-t)&&(this.velocity.x=-this.velocity.x,this.position.x=Math.max(0,Math.min(window.innerWidth-t,this.position.x))),(this.position.y<=0||this.position.y>=window.innerHeight-i)&&(this.velocity.y=-this.velocity.y,this.position.y=Math.max(0,Math.min(window.innerHeight-i,this.position.y)))}updateColor(){this.colorTransition+=this.COLOR_TRANSITION_SPEED,this.colorTransition>=1&&(this.colorTransition=0,this.currentColorIndex=(this.currentColorIndex+1)%this.COLORS.length);let e=this.hexToRgb(this.COLORS[this.currentColorIndex]),t=(this.currentColorIndex+1)%this.COLORS.length,i=this.hexToRgb(this.COLORS[t]);if(e&&i){let o=this.interpolateColor(e,i,this.colorTransition);this.element.style.color=`rgb(${o.r}, ${o.g}, ${o.b})`}}interpolateColor(e,t,i){return{r:Math.round(e.r+(t.r-e.r)*i),g:Math.round(e.g+(t.g-e.g)*i),b:Math.round(e.b+(t.b-e.b)*i)}}hexToRgb(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}applyStyles(){this.element.style.left=`${this.position.x}px`,this.element.style.top=`${this.position.y}px`}destroy(){this.element.remove()}},l=class{constructor(){n(this,"scene");n(this,"camera");n(this,"renderer");n(this,"controls");n(this,"room",null);n(this,"chair",null);n(this,"isRotating",!1);n(this,"targetRotation",0);n(this,"startRotation",0);n(this,"raycaster");n(this,"ROTATION_ANGLE",Math.PI/6);n(this,"ANIMATION_DURATION",1e3);n(this,"animationStartTime",0);n(this,"BOUNCEABLE_OBJECT_NAMES",["Mouse","Keyboard","KeyboardBase"]);n(this,"bounceableObjects",[]);n(this,"GRAVITY",-2.45);n(this,"DAMPENING",.6);n(this,"loadingBar");n(this,"loadedModel");n(this,"bouncingText");this.scene=new r.Scene,this.camera=new r.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new r.WebGLRenderer({antialias:!0,powerPreference:"high-performance"}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=r.PCFSoftShadowMap,this.renderer.outputColorSpace=r.SRGBColorSpace,this.renderer.toneMapping=r.NoToneMapping,this.renderer.toneMappingExposure=1.4,this.renderer.setPixelRatio(window.devicePixelRatio),document.body.appendChild(this.renderer.domElement),this.camera.position.set(4,4,4),this.camera.lookAt(0,0,0),this.controls=new m(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.enableZoom=!0,this.controls.enablePan=!1,this.controls.minPolarAngle=Math.PI/4,this.controls.maxPolarAngle=Math.PI/3,this.controls.minAzimuthAngle=Math.PI/6,this.controls.maxAzimuthAngle=Math.PI/3,this.setupLights(),this.raycaster=new r.Raycaster,this.loadingBar=new h,this.loadRoom(),this.bouncingText=new d("Consulting","/consulting.html"),this.setupEventListeners(),this.animate(performance.now())}setupLights(){let e=new r.AmbientLight(16777215,.4);this.scene.add(e)}setupWindowLight(e){let t=new r.Vector3;e.getWorldPosition(t),t.z-=.06,t.y+=.06;let i=new r.PointLight(16765582,1,0);i.position.copy(t),i.castShadow=!0,i.shadow.mapSize.width=1024,i.shadow.mapSize.height=1024,i.shadow.bias=-.001,this.scene.add(i)}setupLampLight(e){let t=new r.Vector3;e.getWorldPosition(t),t.y+=.06,t.z+=.04;let i=new r.PointLight(16765582,.1,5,1);i.castShadow=!0,i.shadow.mapSize.width=1024,i.shadow.mapSize.height=1024,i.shadow.bias=-.001,i.position.copy(t);let o=new r.SpotLight(16765582,1);o.position.copy(t),o.angle=Math.PI/4,o.penumbra=.2,o.decay=2,o.distance=10,o.castShadow=!0,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,o.shadow.bias=-.001;let a=new r.Object3D;this.scene.add(a),o.target=a,a.position.set(0,-1,0),this.scene.add(i),this.scene.add(o)}enhanceMaterial(e){!e.material||!(e.material instanceof r.MeshStandardMaterial)||(e.castShadow=!0,e.receiveShadow=!0,e.material.envMapIntensity=1.5,e.material.metalness=e.material.metalness||0,e.material.roughness=Math.max(.3,e.material.roughness||1),(e.name==="Glass"||e.name.includes("Glass"))&&(e.material.emissive=new r.Color(16765582),e.material.emissiveIntensity=.9),e.material.needsUpdate=!0)}loadRoom(){let e=new u,t=new g;t.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),t.setDecoderConfig({type:"js"}),e.setDRACOLoader(t),e.load("room.glb?v=1.0.0",i=>{this.loadedModel=i.scene,this.setupLoadedModel(),this.loadingBar.hide(()=>{this.room=this.loadedModel||null,this.room&&this.scene.add(this.room),this.bouncingText.show()})},i=>{if(i.lengthComputable){let o=i.loaded/i.total*100;this.loadingBar.updateProgress(o)}},i=>{console.error("Error loading room:",i),this.loadingBar.showError()})}setupLoadedModel(){if(!this.loadedModel)return;this.chair=this.loadedModel.getObjectByName("Chair")||null,this.chair&&(this.setupChairInteraction(),setTimeout(()=>this.startChairRotation(),1e3)),this.BOUNCEABLE_OBJECT_NAMES.forEach(i=>{let o=this.loadedModel?.getObjectByName(i);o&&this.setupBounceableObject(o)}),this.loadedModel.traverse(i=>{i.name==="WindowGlass"||i.name.includes("WindowGlass")?this.setupWindowLight(i):(i.name==="TableLampShade"||i.name.includes("TableLampShade"))&&this.setupLampLight(i),i instanceof r.Mesh&&this.enhanceMaterial(i)});let t=new r.Box3().setFromObject(this.loadedModel).getCenter(new r.Vector3);this.loadedModel.position.sub(t)}setupChairInteraction(){let e=new r.Vector2;window.addEventListener("click",t=>{e.x=t.clientX/window.innerWidth*2-1,e.y=-(t.clientY/window.innerHeight)*2+1,this.raycaster.setFromCamera(e,this.camera),this.raycaster.intersectObject(this.chair,!0).length>0&&!this.isRotating&&this.startChairRotation()})}startChairRotation(){this.chair&&(this.startRotation=this.chair.rotation.y,this.targetRotation=Math.abs(this.startRotation)<.01?this.ROTATION_ANGLE:0,this.isRotating=!0,this.animationStartTime=performance.now())}updateChairRotation(e){if(!this.chair||!this.isRotating)return;let t=e-this.animationStartTime,i=Math.min(t/this.ANIMATION_DURATION,1);if(i<1){let o=this.easeInOutQuad(i);this.chair.rotation.y=this.startRotation+(this.targetRotation-this.startRotation)*o}else this.chair.rotation.y=this.targetRotation,this.isRotating=!1}setupBounceableObject(e){let t=new r.Vector3;e.getWorldPosition(t);let i=t.y;e.position.y=i+.3,this.bounceableObjects.push({object:e,initialY:i,velocity:0})}setupEventListeners(){window.addEventListener("resize",()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}),window.addEventListener("click",e=>{let t=new r.Vector2;t.x=e.clientX/window.innerWidth*2-1,t.y=-(e.clientY/window.innerHeight)*2+1,this.raycaster.setFromCamera(t,this.camera);for(let i of this.bounceableObjects)if(this.raycaster.intersectObject(i.object,!0).length>0){i.velocity=.8;break}})}easeInOutQuad(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}updateBounceableObjects(e){for(let t of this.bounceableObjects)t.velocity+=this.GRAVITY*e,t.object.position.y+=t.velocity*e,t.object.position.y<=t.initialY&&(t.object.position.y=t.initialY,t.velocity=-t.velocity*this.DAMPENING,Math.abs(t.velocity)<.01&&(t.velocity=0))}animate(e){requestAnimationFrame(t=>this.animate(t)),this.isRotating&&this.updateChairRotation(e),this.updateBounceableObjects(.016),this.bouncingText.update(),this.controls.update(),this.renderer.render(this.scene,this.camera)}};new l;
