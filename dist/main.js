var d=Object.defineProperty;var m=(o,t,e)=>t in o?d(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>m(o,typeof t!="symbol"?t+"":t,e);import*as s from"three";import*as r from"three";var n=class{constructor(t,e){i(this,"mesh");i(this,"velocity",0);i(this,"gravity",-9.82);i(this,"dampening");i(this,"clickBoostVelocity");i(this,"maxHeight",5);i(this,"minHeight",.55);this.dampening=e.dampening??.46,this.clickBoostVelocity=e.clickBoostVelocity??3;let a=new r.MeshStandardMaterial({color:e.color??16744272});this.mesh=new r.Mesh(e.geometry,a),this.mesh.castShadow=!0,this.mesh.position.copy(e.position??new r.Vector3(0,4,0)),t.add(this.mesh)}getMesh(){return this.mesh}onClick(){this.velocity=this.clickBoostVelocity}update(t){this.velocity+=this.gravity*t,this.mesh.position.y+=this.velocity*t,this.mesh.position.y>=this.maxHeight&&(this.mesh.position.y=this.maxHeight,this.velocity=0),this.mesh.position.y<=this.minHeight&&(this.mesh.position.y=this.minHeight,this.velocity=-this.velocity*this.dampening,Math.abs(this.velocity)<.01&&(this.velocity=0))}},h=class extends n{constructor(t){super(t,{geometry:new r.SphereGeometry(.3,32,32),position:new r.Vector3(-1,4,0),dampening:.7,clickBoostVelocity:2.5})}},c=class extends n{constructor(t){super(t,{geometry:new r.BoxGeometry(.6,.6,.6),color:4286945,position:new r.Vector3(1,4,0),dampening:.4,clickBoostVelocity:1.4})}};var l=class{constructor(){i(this,"scene");i(this,"camera");i(this,"renderer");i(this,"shapes",[]);i(this,"lastTime",0);i(this,"raycaster");i(this,"mouse");this.scene=new s.Scene,this.camera=new s.PerspectiveCamera(45,globalThis.innerWidth/globalThis.innerHeight,.1,1e3),this.renderer=new s.WebGLRenderer({antialias:!0}),this.raycaster=new s.Raycaster,this.mouse=new s.Vector2,this.setupRenderer(),this.createGround(),this.setupLights(),this.setupCamera(),this.setupEventListeners();let t=new h(this.scene),e=new c(this.scene);this.shapes.push({mesh:t.getMesh(),shape:t},{mesh:e.getMesh(),shape:e}),this.lastTime=performance.now()/1e3,this.loop()}setupRenderer(){this.renderer.setSize(globalThis.innerWidth,globalThis.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=s.PCFSoftShadowMap,globalThis.document.body.appendChild(this.renderer.domElement)}createGround(){let t=new s.BoxGeometry(10,.5,10),e=[new s.MeshStandardMaterial({color:8421504,roughness:.8}),new s.MeshStandardMaterial({color:8421504,roughness:.8}),new s.MeshStandardMaterial({color:16777120,roughness:.8}),new s.MeshStandardMaterial({color:8421504,roughness:.8}),new s.MeshStandardMaterial({color:8421504,roughness:.8})],a=new s.Mesh(t,e);a.receiveShadow=!0,this.scene.add(a)}setupLights(){let t=new s.AmbientLight(16777215,.5);this.scene.add(t);let e=new s.DirectionalLight(16777215,1);e.position.set(0,10,0),e.castShadow=!0,e.shadow.camera.near=.1,e.shadow.camera.far=20,e.shadow.camera.left=-5,e.shadow.camera.right=5,e.shadow.camera.top=5,e.shadow.camera.bottom=-5,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,this.scene.add(e)}setupCamera(){this.camera.position.set(10,12,10),this.camera.lookAt(0,0,0)}setupEventListeners(){globalThis.addEventListener("resize",()=>{this.camera.aspect=globalThis.innerWidth/globalThis.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(globalThis.innerWidth,globalThis.innerHeight)}),globalThis.addEventListener("click",t=>{this.mouse.x=t.clientX/globalThis.innerWidth*2-1,this.mouse.y=-(t.clientY/globalThis.innerHeight)*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);for(let{mesh:e,shape:a}of this.shapes)this.raycaster.intersectObject(e).length>0&&a.onClick()})}loop(){let t=performance.now()/1e3,e=t-this.lastTime;e>.1&&(e=1/60),this.lastTime=t;for(let{shape:a}of this.shapes)a.update(e);this.renderer.render(this.scene,this.camera),globalThis.requestAnimationFrame(()=>this.loop())}};new l;
